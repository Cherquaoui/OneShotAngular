<button (click)="testoneshot2()">test oneshot2</button>
<div class="d-flex justify-content-center" style="margin-top: 10px">
  <div class="d-flex justify-content-center col-12" style="height:70px">

    <div class="col-9 d-flex flex-column justify-content-center">
      <div style="height: 50px">
        <mat-form-field >
          <input matInput [(ngModel)]="filtreRecherche" placeholder="Rechercher"
                 [matAutocomplete]="auto" [formControl]="myControl" >
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let item of searchResult" [value]="item">
              {{ item }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
<!--        <mat-form-field>
          <mat-select [(value)]="filtreRegion" placeholder="Filtrer par région :" (valueChange)="refreshData(0,10)">
            <mat-option value="">Aucun</mat-option>
            <mat-option value="Rabat">Rabat</mat-option>
            <mat-option value="Casablanca">Casablanca</mat-option>
            <mat-option value="Tanger">Tanger</mat-option>
            <mat-option value="Agadir">Agadir</mat-option>
            <mat-option value="Meknes">Meknes</mat-option>
            <mat-option value="Marrakech">Marrakech</mat-option>
          </mat-select>
        </mat-form-field>-->
        <mat-form-field >
          <mat-select [(value)]="filtreTypologie" placeholder="Filtrer par typologie"
                      (valueChange)="refreshData(0,10)" >
            <mat-option value="">Aucun</mat-option>
            <mat-option value="RT">RoofTop</mat-option>
            <mat-option value="Lampadaire">Lampadaire</mat-option>
            <mat-option value="Lampadaire Esth">Lampadaire Esth</mat-option>
            <mat-option value="GF">GreenField</mat-option>
            <mat-option value="Palmier">Palmier</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-select [(value)]="filtreCw" placeholder="Filtrer etat CW" (valueChange)="refreshData(0,10)">
            <mat-option value="">Aucun</mat-option>
            <mat-option value="encours">En cours</mat-option>
            <mat-option value="Livré">Livré</mat-option>
            <mat-option value="XX">Bloqué</mat-option>
            <mat-option value="Tempo">Temporisé</mat-option>
            <mat-option value="ZZ">CW non SBI</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-select [(value)]="filtreElec" placeholder="Filtrer etat Elec" (valueChange)="refreshData(0,10)">
            <mat-option value="">Aucun</mat-option>
            <mat-option value="encours">En cours</mat-option>
            <mat-option value="Electrifié">Electrifié</mat-option>
            <mat-option value="XX">Bloqué</mat-option>
            <mat-option value="Tempo">Temporisé</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-button-toggle-group #group="matButtonToggleGroup"   style="margin-left: 60px">
          <mat-button-toggle (mouseup)="cliqueSuivi()" [checked]="true">Suivi</mat-button-toggle>
          <mat-button-toggle (mouseup)="cliqueDates()">Dates</mat-button-toggle>

        </mat-button-toggle-group>

      </div>
    </div>
    <div class="d-flex flex-column col-2 justify-content-center">
      <div style="height: 50px" class="d-flex">


        <button mat-raised-button>vers Excel</button>
        <div></div>
      </div>
    </div>
  </div>
</div>


<div class="d-flex  justify-content-center" style="width: 100%; font-size: 10px">
  <div class="col-11">
  <div style="overflow: scroll;max-height: 450px;min-height: 450px">
    <table mat-table [dataSource]="dataSource" matSort class="table-hover table-sm"
           style=" width: 100%;font-size: 10px">

      <ng-container matColumnDef="codeSite">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Code site</th>

        <td mat-cell *matCellDef="let cw" style="cursor: pointer">
          <button mat-button class="monbutton" [matMenuTriggerFor]="lvl1"><span *ngIf="monhidden" >{{cw.codeSite}}</span></button>
          <mat-menu #lvl1="matMenu">
            <button mat-menu-item (click)="modifier(cw.codeSite)">Modifier</button>
            <button mat-menu-item>Détails</button>
            <button mat-menu-item>Google Maps</button>
            <button mat-menu-item [matMenuTriggerFor]="lvl2">Naviguer</button>
          </mat-menu>
          <mat-menu #lvl2="matMenu">

            <button mat-menu-item>Electrification</button>
            <button mat-menu-item>Radio</button>
            <button mat-menu-item>Transmission</button>
          </mat-menu>
        </td>

      </ng-container>
      <ng-container matColumnDef="dateGo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Date Go</th>
        <td mat-cell *matCellDef="let oneshot"><span *ngIf="monhidden" > {{oneshot.dateGo}}</span></td>
      </ng-container>
      <ng-container matColumnDef="cw.etatCw">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Etat CW</th>
        <td mat-cell *matCellDef="let oneshot "><span *ngIf="monhidden" > {{oneshot.cw.etatCw.replace("_encours","")}}</span></td>
      </ng-container>

      <ng-container matColumnDef="typologie">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Typologie</th>
        <td mat-cell *matCellDef="let oneshot"><span *ngIf="monhidden" > {{oneshot.typologie}}</span></td>
      </ng-container>

      <ng-container matColumnDef="elec.poseCompteur">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Date Electrification</th>
        <td mat-cell *matCellDef="let oneshot"><span *ngIf="monhidden" > {{oneshot.electrification.poseCompteur}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.elecEtat">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Etat Electrification</th>
        <td mat-cell *matCellDef="let oneshot"><span *ngIf="monhidden" > {{oneshot.elec?.elecEtat.replace("_encours","")}}</span></td>
      </ng-container>


      <ng-container matColumnDef="cw.equipeCw.nom">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Equipe</th>
        <td mat-cell *matCellDef="let oneshot"> <span *ngIf="monhidden" >{{oneshot.cw.equipeCw.nom}}</span></td>

      </ng-container>
      <ng-container matColumnDef="cw.ouverture">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Ouverture</th>
        <td mat-cell *matCellDef="let oneshot"><span *ngIf="monhidden" > {{oneshot.cw.ouverture}}</span></td>
      </ng-container>


      <ng-container matColumnDef="cw.fouilles">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fouilles</th>
        <td mat-cell *matCellDef="let oneshot"> <span *ngIf="monhidden" >{{oneshot.cw.fouilles}}</span></td>
      </ng-container>

      <ng-container matColumnDef="cw.coulage">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Coulage</th>
        <td mat-cell *matCellDef="let oneshot"> <span *ngIf="monhidden" >{{oneshot.cw.coulage}}</span></td>
      </ng-container>

      <ng-container matColumnDef="cw.montage">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Montage</th>
        <td mat-cell *matCellDef="let oneshot"> <span *ngIf="monhidden" >{{oneshot.cw.montage}}</span></td>
      </ng-container>

      <ng-container matColumnDef="cw.finCw">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>finCw</th>
        <td mat-cell *matCellDef="let oneshot"><span *ngIf="monhidden" > {{oneshot.cw.finCw}}</span></td>
      </ng-container>
      <ng-container matColumnDef="cw.commentairesCw">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Commentaires</th>
        <td mat-cell *matCellDef="let oneshot" style="min-width: 400px;max-width: 400px"> {{oneshot.cw.commentairesCw}}</td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true" style="height: 35px"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" style="height: 25px"></tr>

    </table>
  </div>
  <div>
    <mat-paginator (page)="page($event)" [length]="lenght" [pageSizeOptions]="[15, 30, 50,100]"
                   showFirstLastButtons></mat-paginator>
  </div>
</div>
</div>

