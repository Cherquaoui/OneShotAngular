<div class="d-flex justify-content-center" style="margin-top: 10px">
  <div class="d-flex justify-content-center col-12" style="height:70px">

    <div class="col-10 d-flex flex-column justify-content-center">
      <div style="height: 50px">
        <mat-form-field >
          <input matInput [(ngModel)]="filtreRecherche" placeholder="Rechercher"
                 [matAutocomplete]="auto" [formControl]="myControl" >
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let item of searchResult" [value]="item">
              {{ item }}</mat-option>

          </mat-autocomplete>
        </mat-form-field>
<!--        <mat-form-field>
          <mat-select [(value)]="filtreRegion" placeholder="Filtrer par région :" (valueChange)="refreshData(0,10)">
            <mat-option value="">Aucun</mat-option>
            <mat-option value="Rabat">Rabat</mat-option>
            <mat-option value="Casablanca">Casablanca</mat-option>
            <mat-option value="Tanger">Tanger</mat-option>
            <mat-option value="Agadir">Agadir</mat-option>
            <mat-option value="Meknes">Meknes</mat-option>
            <mat-option value="Marrakech">Marrakech</mat-option>
          </mat-select>
        </mat-form-field>-->
        <mat-form-field>
          <mat-select [(value)]="filtreTypologie" placeholder="Filtrer par typologie" (valueChange)="refreshData(0,10)">
            <mat-option value="">Aucun</mat-option>
            <mat-option value="RT">RoofTop</mat-option>
            <mat-option value="Lampadaire">Lampadaire</mat-option>
            <mat-option value="Lampadaire Esth">Lampadaire Esth</mat-option>
            <mat-option value="GF">GreenField</mat-option>
            <mat-option value="Palmier">Palmier</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-select [(value)]="filtreCw" placeholder="Filtrer etat CW" (valueChange)="refreshData(0,10)">
            <mat-option value="">Aucun</mat-option>
            <mat-option value="encours">En cours</mat-option>
            <mat-option value="Livré">Livré</mat-option>
            <mat-option value="XX">Bloqué</mat-option>
            <mat-option value="Tempo">Temporisé</mat-option>
            <mat-option value="ZZ">CW non SBI</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-select [(value)]="filtreElec" placeholder="Filtrer etat Elec" (valueChange)="refreshData(0,10)">
            <mat-option value="">Aucun</mat-option>
            <mat-option value="encours">En cours</mat-option>
            <mat-option value="Electrifié">Electrifié</mat-option>
            <mat-option value="XX">Bloqué</mat-option>
            <mat-option value="Tempo">Temporisé</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-button-toggle-group #group="matButtonToggleGroup"   style="margin-left: 60px">
          <mat-button-toggle (mouseup)="monClique()" [checked]="true">Suivi</mat-button-toggle>
          <mat-button-toggle (mouseup)="monClique1()">Dates</mat-button-toggle>
          <mat-button-toggle (mouseup)="monClique2()">Travaux</mat-button-toggle>
        </mat-button-toggle-group>
      </div>
    </div>
    <div class="d-flex flex-column col-2 justify-content-center">
      <div style="height: 50px" class="d-flex">


        <button mat-raised-button>vers Excel</button>
        <div></div>
      </div>
    </div>
  </div>
</div>




<div class="d-flex justify-content-center" style=" font-size: 10px;">
  <div class="col-12" >
    <div  style="overflow: scroll;max-height: 450px;min-height: 450px;border-style: solid">
    <table mat-table [dataSource]="dataSource" matSort class="table-hover table-sm"
           style="font-size: 10px;border-style: dashed;width: 100%">

      <ng-container matColumnDef="codeSite">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Code site</th>

        <td mat-cell *matCellDef="let elec" style="cursor: pointer">
          <button mat-button class="monbutton" [matMenuTriggerFor]="lvl1"><span *ngIf="monhidden">{{elec.codeSite}}</span></button>
          <mat-menu #lvl1="matMenu">
            <button mat-menu-item  [matMenuTriggerFor]="lvl3">Modifier</button>
            <button mat-menu-item>Détails</button>
            <button mat-menu-item>Google Maps</button>
            <button mat-menu-item [matMenuTriggerFor]="lvl2">Naviguer</button>
          </mat-menu>
          <mat-menu #lvl2="matMenu">
            <button mat-menu-item>CW</button>
            <button mat-menu-item>Radio</button>
            <button mat-menu-item>Transmission</button>
          </mat-menu>
          <mat-menu #lvl3="matMenu">
            <button mat-menu-item (click)="modifier(elec.codeSite)">Suivi Elec</button>
            <button mat-menu-item (click)="modifierTrav(elec.codeSite)">Travaux</button>
          </mat-menu>
        </td>
      </ng-container>
      <ng-container matColumnDef="elec.regie">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Régie</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.regie}}</span></td>
      </ng-container>
      <ng-container matColumnDef="dateGo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Date GO</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.dateGo}}</span></td>

      </ng-container>

      <ng-container matColumnDef="typologie">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Typologie</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.typologie}}</span></td>
      </ng-container>

      <ng-container matColumnDef="cw.etatCw">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Etat Cw</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.cw.etatCw.replace("_encours","")}}</span></td>
      </ng-container>

      <ng-container matColumnDef="elec.numDossier">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>N Dossier</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.numDossier}}</span></td>

      </ng-container>
      <ng-container matColumnDef="elec.elecEtat">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Etat</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.elecEtat.replace("_encours","")}}</span></td>
      </ng-container>


      <ng-container matColumnDef="elec.depotDemande">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Demande</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.depotDemande}}</span></td>
      </ng-container>

      <ng-container matColumnDef="elec.etude">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Etude</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.etude}}</span></td>
      </ng-container>

      <ng-container matColumnDef="elec.devis">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Devis</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.devis}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.payementDevis">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Payement</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.payementDevis}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.autorisation">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Autorisation</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.autorisation}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.debutTravaux">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Début travaux</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.debutTravaux}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.finTravaux">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fin travaux</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.finTravaux}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.reception">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Reception</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.reception}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.abonnement">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Abonnement</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.abonnement}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.poseCompteur">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Pose compteur</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.poseCompteur}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.electrav.bta">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>BT A</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.elecTrav.btA}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.electrav.bts">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>BT ST</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.elecTrav.btS}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.electrav.btsrf">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>BT RF</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.elecTrav.btSRf}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.electrav.btniche">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Niche</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.elecTrav.btNiche}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.electrav.ok">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Ok</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.elecTrav.ok}}</span></td>
      </ng-container>
      <ng-container matColumnDef="elec.electrav.equipeElec">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Equipe Elec</th>
        <td mat-cell *matCellDef="let elec"> <span *ngIf="monhidden">{{elec.elec.elecTrav.equipeElec}}</span></td>
      </ng-container>


      <tr mat-header-row (click)="filter()" *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" style="height: 30px"></tr>

    </table>
    </div>

  <div>
    <mat-paginator (page)="page($event)" [length]="length"  [pageSizeOptions]="[15, 30, 50,100]" showFirstLastButtons></mat-paginator>
  </div>
</div>
</div>
